<div class="cursor-inventory" [class.visible]="isVisible">
  <div class="inventory-header">
    <h3>Arsenal de Cursors</h3>
    <p>Selecciona tu herramienta</p>
  </div>
  
  <div class="cursor-slots">
    <div 
      *ngFor="let slot of cursorSlots" 
      [ngClass]="getSlotClass(slot)"
      (click)="onSlotClick(slot)"
      [attr.title]="slot.description"
    >
      <!-- Slot frame -->
      <div class="slot-frame">
        <div class="slot-border"></div>
        <div class="slot-content">
          
          <!-- Fire Cursor SVG (Working Version) -->
          <svg *ngIf="slot.type === 'fire'" class="cursor-icon" width="32" height="32" viewBox="0 0 60 60">
            <defs>
              <radialGradient id="greenFireGrad" cx="50%" cy="80%" r="50%">
                <stop offset="0%" stop-color="#00ff44"/>
                <stop offset="40%" stop-color="#00cc33"/>
                <stop offset="80%" stop-color="#00aa22"/>
                <stop offset="100%" stop-color="#008811"/>
              </radialGradient>
            </defs>
            
            <!-- Llama principal -->
            <path d="M30 50 Q20 35 25 20 Q30 10 35 20 Q40 35 30 50" fill="url(#greenFireGrad)">
              <animateTransform *ngIf="slot.active" 
                                attributeName="transform" 
                                type="scale" 
                                values="1;1.15;0.95;1" 
                                dur="0.8s" 
                                repeatCount="indefinite"/>
            </path>
            
            <!-- Llamas secundarias -->
            <path d="M25 45 Q18 35 22 25 Q25 20 28 25 Q32 35 25 45" fill="url(#greenFireGrad)" opacity="0.8">
              <animateTransform *ngIf="slot.active" 
                                attributeName="transform" 
                                type="scale" 
                                values="1;1.1;1" 
                                dur="1s" 
                                repeatCount="indefinite"/>
            </path>
            <path d="M35 45 Q42 35 38 25 Q35 20 32 25 Q28 35 35 45" fill="url(#greenFireGrad)" opacity="0.8">
              <animateTransform *ngIf="slot.active" 
                                attributeName="transform" 
                                type="scale" 
                                values="1;1.1;1" 
                                dur="1.2s" 
                                repeatCount="indefinite"/>
            </path>
            
            <!-- PartÃ­culas Matrix -->
            <text x="20" y="30" fill="#00ff44" font-size="6" font-family="monospace" opacity="0.7">1</text>
            <text x="42" y="25" fill="#00cc33" font-size="5" font-family="monospace" opacity="0.6">0</text>
            <text x="32" y="18" fill="#00aa22" font-size="4" font-family="monospace" opacity="0.5">1</text>
          </svg>

          <!-- Torch Cursor SVG -->
          <svg *ngIf="slot.type === 'torch'" class="cursor-icon" width="32" height="32" viewBox="0 0 32 32">
            <defs>
              <linearGradient id="miniMetal" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#e0e0e0"/>
                <stop offset="50%" stop-color="#888"/>
                <stop offset="100%" stop-color="#444"/>
              </linearGradient>
            </defs>
            
            <!-- Handle -->
            <rect x="14" y="18" width="4" height="12" fill="url(#miniMetal)" stroke="#00ff44" stroke-width="0.3" rx="1"/>
            
            <!-- Cup -->
            <ellipse cx="16" cy="16" rx="6" ry="2" fill="url(#miniMetal)" stroke="#00ff44" stroke-width="0.5"/>
            <rect x="10" y="14" width="12" height="4" fill="url(#miniMetal)" stroke="#00ff44" stroke-width="0.5" rx="1"/>
            
            <!-- Flame (only when active) -->
            <g *ngIf="slot.active">
              <path d="M12 14 Q16 6 20 14 Q18 18 16 16 Q14 18 12 14" fill="url(#fireGrad)">
                <animateTransform attributeName="transform" 
                                  type="scale" 
                                  values="1;1.08;0.92;1" 
                                  dur="0.6s" 
                                  repeatCount="indefinite"/>
              </path>
            </g>
            
            <!-- LED -->
            <circle *ngIf="slot.unlocked" cx="16" cy="22" r="0.8" fill="#00ff44" opacity="0.9">
              <animate attributeName="opacity" values="0.9;0.4;0.9" dur="1.2s" repeatCount="indefinite"/>
            </circle>
          </svg>

          <!-- Net Cursor SVG -->
          <svg *ngIf="slot.type === 'net'" class="cursor-icon" width="32" height="32" viewBox="0 0 32 32">
            <defs>
              <linearGradient id="netGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#00ff44"/>
                <stop offset="50%" stop-color="#00cc33"/>
                <stop offset="100%" stop-color="#008811"/>
              </linearGradient>
            </defs>
            
            <!-- Handle -->
            <rect x="14" y="18" width="4" height="10" fill="url(#miniMetal)" stroke="#00ff44" stroke-width="0.3" rx="1"/>
            
            <!-- Net circles -->
            <circle cx="16" cy="12" r="8" fill="none" stroke="url(#netGrad)" stroke-width="1" opacity="0.8"/>
            <circle cx="16" cy="12" r="5" fill="none" stroke="url(#netGrad)" stroke-width="0.6" opacity="0.7"/>
            <circle cx="16" cy="12" r="2" fill="none" stroke="url(#netGrad)" stroke-width="0.8" opacity="0.9"/>
            
            <!-- Net lines -->
            <line x1="8" y1="12" x2="24" y2="12" stroke="url(#netGrad)" stroke-width="0.4" opacity="0.7"/>
            <line x1="16" y1="4" x2="16" y2="20" stroke="url(#netGrad)" stroke-width="0.4" opacity="0.7"/>
            
            <!-- Animated particles (when active) -->
            <circle *ngIf="slot.active" cx="12" cy="8" r="0.8" fill="#00ff44" opacity="0.6">
              <animateTransform attributeName="transform" 
                                type="translate" 
                                values="0,0;2,2;0,0" 
                                dur="2s" 
                                repeatCount="indefinite"/>
            </circle>
            <circle *ngIf="slot.active" cx="20" cy="16" r="0.6" fill="#00cc33" opacity="0.7">
              <animateTransform attributeName="transform" 
                                type="translate" 
                                values="0,0;-1,1;0,0" 
                                dur="1.8s" 
                                repeatCount="indefinite"/>
            </circle>
          </svg>
          
          <!-- Lock overlay for locked slots -->
          <div *ngIf="!slot.unlocked" class="lock-overlay">
            <svg width="16" height="16" viewBox="0 0 16 16">
              <rect x="4" y="7" width="8" height="6" fill="none" stroke="#666" stroke-width="1" rx="1"/>
              <path d="M6 7 Q8 5 10 7" fill="none" stroke="#666" stroke-width="1"/>
            </svg>
          </div>
          
          <!-- Active indicator -->
          <div *ngIf="slot.active" class="active-indicator">
            <div class="active-dot"></div>
          </div>
        </div>
      </div>
      
      <!-- Slot info -->
      <div class="slot-info">
        <h4>{{ slot.name }}</h4>
        <p>{{ slot.description }}</p>
      </div>
    </div>
  </div>
</div>